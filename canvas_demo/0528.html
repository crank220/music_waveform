<!doctype html>  
<html lang="en">  
 <head>  
  <meta charset="UTF-8">  
  <title>生成波形图</title>  
  <style>  
    html,body{
      height: 100%;
    }
    body{
      display: flex;
      justify-content:center;
      align-items:center;
    }
    canvas{  
        background:white;  
        height: 80px;
    }  
  </style>  
 </head>  
 <body>  
    <canvas id="canvas" width="1000" height="80">  
        你这不行啊..不支持canvas  
    </canvas>
    <audio src="file:///Users/shizhiqiang/Sites/demo/mp3/i2.mp3" id="audio"></audio>  
    <script>
      var demoJson=[0.000,0.000,0.000,0.000,0.000,0.000,0.000,0.192,0.424,0.369,0.302,0.239,0.471,0.502,0.455,0.388,0.373,0.341,0.259,0.196,0.529,0.498,0.416,0.369,0.380,0.329,0.263,0.188,0.439,0.467,0.412,0.341,0.333,0.255,0.208,0.161,0.486,0.498,0.459,0.478,0.471,0.431,0.376,0.400,0.447,0.431,0.376,0.322,0.400,0.357,0.314,0.247,0.439,0.435,0.373,0.306,0.310,0.290,0.239,0.161,0.353,0.400,0.353,0.302,0.318,0.259,0.208,0.157,0.361,0.376,0.329,0.267,0.333,0.318,0.255,0.224,0.459,0.455,0.408,0.322,0.380,0.392,0.329,0.275,0.396,0.388,0.365,0.306,0.376,0.404,0.404,0.439,0.529,0.510,0.427,0.373,0.467,0.514,0.486,0.404,0.365,0.322,0.267,0.212,0.298,0.420,0.357,0.290,0.478,0.463,0.463,0.416,0.518,0.506,0.471,0.408,0.349,0.314,0.267,0.459,0.424,0.475,0.416,0.353,0.439,0.455,0.463,0.455,0.529,0.514,0.467,0.400,0.349,0.294,0.243,0.220,0.502,0.502,0.439,0.369,0.420,0.439,0.443,0.443,0.502,0.510,0.447,0.384,0.459,0.447,0.443,0.435,0.486,0.561,0.545,0.471,0.396,0.341,0.282,0.231,0.176,0.125,0.094,0.047,0.016,0.000,0.000,0.000,0.000,0.000,0.000,0.000,0.000,0.000,0.000,0.000,0.000,0.000,0.000,0.000,0.000,0.000,0.000,0.000,0.000,0.000,0.000,0.000,0.000,0.000,0.000,0.000,0.000,0.000,0.000,0.000,0.000,0.000,0.000,0.000,0.000,0.000,0.000,0.000,0.000,0.000,0.000,0.000,0.000,0.000];
    (function (){
      var canvas = document.getElementById("canvas"); 
      var audio = document.getElementById('audio');
      var context = canvas.getContext("2d"); 
      canvas.width = demoJson.length * 3;
      var canvasHeight = canvas.height/2;
      context.fillStyle = "#f55";      
      for (var j=0;j<demoJson.length;j++) {  
        context.fillRect(3 * j, canvasHeight - (demoJson[j] * canvasHeight), 2.2, demoJson[j] * canvasHeight);
        context.fillRect(3 * j, canvasHeight + 1, 2.2, 1/2 * demoJson[j] * canvasHeight);
      }
    })()
    canvas.onclick=function(){
      audio.play();
    }
  </script>  
 </body>  
</html>  